\hypertarget{classSMAdapter}{}\section{S\+M\+Adapter Class Reference}
\label{classSMAdapter}\index{S\+M\+Adapter@{S\+M\+Adapter}}


Smart Meter \hyperlink{classAdapter}{Adapter}.  




{\ttfamily \#include $<$S\+M\+Adapter.\+h$>$}

Inheritance diagram for S\+M\+Adapter\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classSMAdapter}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classSMAdapter_a5bf9ca331e0f7aac7c182ef080ef74eb}{S\+M\+Adapter} (long int i)
\item 
\hyperlink{classSMAdapter_a4f8ec3739e23b40a4b4c3c26490d1c27}{S\+M\+Adapter} (long int i, \hyperlink{classsmart3p_1_1Unit}{smart3p\+::\+Unit} $\ast$u)
\item 
\hyperlink{classSMAdapter_a935746ba8f7210132ac6324efba1c210}{$\sim$\+S\+M\+Adapter} ()
\item 
void \hyperlink{classSMAdapter_ad35493a50872a683b4b5e0671f783769}{register\+Info\+From\+UC} (omnetpp\+::c\+Message $\ast$msg)
\item 
\hyperlink{classcInteger}{c\+Integer} $\ast$ \hyperlink{classSMAdapter_a3568d35fe2de8828cb6fcaf0bd9d9923}{get\+Id} ()
\item 
\hyperlink{classcInteger}{c\+Integer} $\ast$ \hyperlink{classSMAdapter_a586f83c19527bf0401a50424c24eece1}{get\+Anon\+Id} ()
\item 
omnetpp\+::c\+Queue $\ast$ \hyperlink{classSMAdapter_ab4ec874f14fd50ad8c5fc50c500981c4}{start\+Session\+Key\+Exchange} (omnetpp\+::c\+Message $\ast$msg)
\item 
bool \hyperlink{classSMAdapter_adcce474ffc3ad9717b3307ac95fa1445}{end\+Of\+Session\+Key\+Exchange} (omnetpp\+::c\+Message $\ast$msg)
\item 
omnetpp\+::c\+Message $\ast$ \hyperlink{classSMAdapter_a9e36c5113b54f4b1a2a9f0c3fac4dd22}{send\+Energy\+Consumption} (omnetpp\+::c\+Message $\ast$msg)
\item 
void \hyperlink{classSMAdapter_aecfd03fc0facc3c1a9b43cedce2d026a}{log} (char $\ast$, double)
\item 
void \hyperlink{classSMAdapter_a695f8eb90b349dc6267eb82ec9f9ee93}{add\+Sim\+Time} (double)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Smart Meter \hyperlink{classAdapter}{Adapter}. 

Definition at line 15 of file S\+M\+Adapter.\+h.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classSMAdapter_a5bf9ca331e0f7aac7c182ef080ef74eb}\label{classSMAdapter_a5bf9ca331e0f7aac7c182ef080ef74eb}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!S\+M\+Adapter@{S\+M\+Adapter}}
\index{S\+M\+Adapter@{S\+M\+Adapter}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{S\+M\+Adapter()}{SMAdapter()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily S\+M\+Adapter\+::\+S\+M\+Adapter (\begin{DoxyParamCaption}\item[{long int}]{i }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em i} & Smart Meter ID \\
\hline
\end{DoxyParams}


Definition at line 16 of file S\+M\+Adapter.\+cc.

\mbox{\Hypertarget{classSMAdapter_a4f8ec3739e23b40a4b4c3c26490d1c27}\label{classSMAdapter_a4f8ec3739e23b40a4b4c3c26490d1c27}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!S\+M\+Adapter@{S\+M\+Adapter}}
\index{S\+M\+Adapter@{S\+M\+Adapter}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{S\+M\+Adapter()}{SMAdapter()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily S\+M\+Adapter\+::\+S\+M\+Adapter (\begin{DoxyParamCaption}\item[{long int}]{i,  }\item[{\hyperlink{classsmart3p_1_1Unit}{smart3p\+::\+Unit} $\ast$}]{u }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em i} & Smart Meter ID \\
\hline
{\em u} & Output unit class (used for debugging) \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{classSMAdapter_aecfd03fc0facc3c1a9b43cedce2d026a}{log(char$\ast$, double)}, \hyperlink{classSMAdapter_a695f8eb90b349dc6267eb82ec9f9ee93}{add\+Sim\+Time(double)} 
\end{DoxySeeAlso}


Definition at line 21 of file S\+M\+Adapter.\+cc.

\mbox{\Hypertarget{classSMAdapter_a935746ba8f7210132ac6324efba1c210}\label{classSMAdapter_a935746ba8f7210132ac6324efba1c210}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!````~S\+M\+Adapter@{$\sim$\+S\+M\+Adapter}}
\index{````~S\+M\+Adapter@{$\sim$\+S\+M\+Adapter}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{$\sim$\+S\+M\+Adapter()}{~SMAdapter()}}
{\footnotesize\ttfamily S\+M\+Adapter\+::$\sim$\+S\+M\+Adapter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 26 of file S\+M\+Adapter.\+cc.



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classSMAdapter_a695f8eb90b349dc6267eb82ec9f9ee93}\label{classSMAdapter_a695f8eb90b349dc6267eb82ec9f9ee93}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!add\+Sim\+Time@{add\+Sim\+Time}}
\index{add\+Sim\+Time@{add\+Sim\+Time}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{add\+Sim\+Time()}{addSimTime()}}
{\footnotesize\ttfamily void S\+M\+Adapter\+::add\+Sim\+Time (\begin{DoxyParamCaption}\item[{double}]{time }\end{DoxyParamCaption})}

Adds time to the simulation 

Definition at line 31 of file S\+M\+Adapter.\+cc.



References Adapter\+::out.

\mbox{\Hypertarget{classSMAdapter_adcce474ffc3ad9717b3307ac95fa1445}\label{classSMAdapter_adcce474ffc3ad9717b3307ac95fa1445}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!end\+Of\+Session\+Key\+Exchange@{end\+Of\+Session\+Key\+Exchange}}
\index{end\+Of\+Session\+Key\+Exchange@{end\+Of\+Session\+Key\+Exchange}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{end\+Of\+Session\+Key\+Exchange()}{endOfSessionKeyExchange()}}
{\footnotesize\ttfamily bool S\+M\+Adapter\+::end\+Of\+Session\+Key\+Exchange (\begin{DoxyParamCaption}\item[{omnetpp\+::c\+Message $\ast$}]{msg }\end{DoxyParamCaption})}

Finishes the session key exchange phase. \begin{DoxyReturn}{Returns}
tells if the final session key passed verification. 
\end{DoxyReturn}


Definition at line 155 of file S\+M\+Adapter.\+cc.



References S\+M\+Imp\+::\+Smart\+Meter\+::recieve\+H\+M\+A\+C().

\mbox{\Hypertarget{classSMAdapter_a586f83c19527bf0401a50424c24eece1}\label{classSMAdapter_a586f83c19527bf0401a50424c24eece1}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!get\+Anon\+Id@{get\+Anon\+Id}}
\index{get\+Anon\+Id@{get\+Anon\+Id}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{get\+Anon\+Id()}{getAnonId()}}
{\footnotesize\ttfamily \hyperlink{classcInteger}{c\+Integer} $\ast$ S\+M\+Adapter\+::get\+Anon\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Gets the Anonymous ID from the underlying protocol Smart Meter 

Definition at line 42 of file S\+M\+Adapter.\+cc.



References S\+M\+Imp\+::\+Smart\+Meter\+::get\+Anon\+Id().

\mbox{\Hypertarget{classSMAdapter_a3568d35fe2de8828cb6fcaf0bd9d9923}\label{classSMAdapter_a3568d35fe2de8828cb6fcaf0bd9d9923}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!get\+Id@{get\+Id}}
\index{get\+Id@{get\+Id}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{get\+Id()}{getId()}}
{\footnotesize\ttfamily \hyperlink{classcInteger}{c\+Integer} $\ast$ S\+M\+Adapter\+::get\+Id (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Gets the ID from the underlying protocol Smart Meter 

Definition at line 47 of file S\+M\+Adapter.\+cc.



References S\+M\+Imp\+::\+Requester\+::get\+Id().

\mbox{\Hypertarget{classSMAdapter_aecfd03fc0facc3c1a9b43cedce2d026a}\label{classSMAdapter_aecfd03fc0facc3c1a9b43cedce2d026a}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!log@{log}}
\index{log@{log}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{log()}{log()}}
{\footnotesize\ttfamily void S\+M\+Adapter\+::log (\begin{DoxyParamCaption}\item[{char $\ast$}]{tag,  }\item[{double}]{value }\end{DoxyParamCaption})}

Emits statistical data. 

Definition at line 36 of file S\+M\+Adapter.\+cc.



References Adapter\+::out.

\mbox{\Hypertarget{classSMAdapter_ad35493a50872a683b4b5e0671f783769}\label{classSMAdapter_ad35493a50872a683b4b5e0671f783769}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!register\+Info\+From\+UC@{register\+Info\+From\+UC}}
\index{register\+Info\+From\+UC@{register\+Info\+From\+UC}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{register\+Info\+From\+U\+C()}{registerInfoFromUC()}}
{\footnotesize\ttfamily void S\+M\+Adapter\+::register\+Info\+From\+UC (\begin{DoxyParamCaption}\item[{omnetpp\+::c\+Message $\ast$}]{msg }\end{DoxyParamCaption})}

Registers key data from Utility Company. 

Definition at line 52 of file S\+M\+Adapter.\+cc.



References S\+M\+Imp\+::\+Master\+Key\+::g, S\+M\+Imp\+::\+Smart\+Meter\+::generate\+Keys(), S\+M\+Imp\+::\+Master\+Key\+::p, S\+M\+Imp\+::\+Payload\+::params, Adapter\+::print(), S\+M\+Imp\+::\+Payload\+::priv, S\+M\+Imp\+::\+Payload\+::pub, S\+M\+Imp\+::\+Master\+Key\+::q, S\+M\+Imp\+::\+Smart\+Meter\+::set\+Anon\+Id(), S\+M\+Imp\+::\+Smart\+Meter\+::set\+H\+M\+A\+C\+Key(), Adapter\+::verbose, and S\+M\+Imp\+::\+Master\+Key\+::x.

\mbox{\Hypertarget{classSMAdapter_a9e36c5113b54f4b1a2a9f0c3fac4dd22}\label{classSMAdapter_a9e36c5113b54f4b1a2a9f0c3fac4dd22}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!send\+Energy\+Consumption@{send\+Energy\+Consumption}}
\index{send\+Energy\+Consumption@{send\+Energy\+Consumption}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{send\+Energy\+Consumption()}{sendEnergyConsumption()}}
{\footnotesize\ttfamily omnetpp\+::c\+Message $\ast$ S\+M\+Adapter\+::send\+Energy\+Consumption (\begin{DoxyParamCaption}\item[{omnetpp\+::c\+Message $\ast$}]{msg }\end{DoxyParamCaption})}

Sends encrypted energy use data to Trusted Thrid Party. 

Definition at line 166 of file S\+M\+Adapter.\+cc.



References S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::c1, S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::c2, smart3p\+::\+S\+M\+Packet\+::get\+Value(), S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::hmac, S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::id, S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::message\+Length, S\+M\+Imp\+::\+Packet\+::pl, Adapter\+::print(), S\+M\+Imp\+::\+Smart\+Meter\+::send\+Data\+To\+T\+T\+P(), S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::time\+Stamp, and Adapter\+::verbose.

\mbox{\Hypertarget{classSMAdapter_ab4ec874f14fd50ad8c5fc50c500981c4}\label{classSMAdapter_ab4ec874f14fd50ad8c5fc50c500981c4}} 
\index{S\+M\+Adapter@{S\+M\+Adapter}!start\+Session\+Key\+Exchange@{start\+Session\+Key\+Exchange}}
\index{start\+Session\+Key\+Exchange@{start\+Session\+Key\+Exchange}!S\+M\+Adapter@{S\+M\+Adapter}}
\subsubsection{\texorpdfstring{start\+Session\+Key\+Exchange()}{startSessionKeyExchange()}}
{\footnotesize\ttfamily omnetpp\+::c\+Queue $\ast$ S\+M\+Adapter\+::start\+Session\+Key\+Exchange (\begin{DoxyParamCaption}\item[{omnetpp\+::c\+Message $\ast$}]{msg }\end{DoxyParamCaption})}

Starts the session key generation. \begin{DoxyReturn}{Returns}
Queue of packets to be sent to Trusted Thrid Party. 
\end{DoxyReturn}


Definition at line 82 of file S\+M\+Adapter.\+cc.



References S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::c1, S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::c2, smart3p\+::\+S\+M\+Packet\+::get\+Id(), S\+M\+Imp\+::\+Requester\+::get\+Id(), S\+M\+Imp\+::\+Requester\+::get\+Public\+Mu(), S\+M\+Imp\+::\+Requester\+::get\+Public\+Partial(), S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::hmac, S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::message\+Length, S\+M\+Imp\+::\+Packet\+::pl, Adapter\+::print(), S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::r, S\+M\+Imp\+::\+Smart\+Meter\+::session\+Key\+Exchange(), smart3p\+::\+S\+M\+Packet\+::set\+Id(), and S\+M\+Imp\+::\+H\+M\+A\+C\+Payload\+::time\+Stamp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/\hyperlink{SMAdapter_8h}{S\+M\+Adapter.\+h}\item 
src/\hyperlink{SMAdapter_8cc}{S\+M\+Adapter.\+cc}\end{DoxyCompactItemize}
